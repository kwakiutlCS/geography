package com.example;


import com.example.geometry.GeoUtils;
import com.example.geometry.Point;
import com.example.geometry.Polygon;

import java.util.Arrays;
import java.util.List;
import java.util.Set;
import java.util.stream.Collectors;

/**
 * Hello world!
 *
 */
public class App 
{
    public static void main( String[] args )
    {

//        double[][] austria = { { 16.979666782304037, 48.123497015976305 }, { 16.903754103267261, 47.714865627628328 }, { 16.340584344150415, 47.71290192320123 }, { 16.534267612380376, 47.496170966169117 }, { 16.202298211337364, 46.852385972676963 }, { 16.011663852612656, 46.683610744811702 }, { 15.137091912504985, 46.65870270444703 }, { 14.632471551174829, 46.431817328469549 }, { 13.806475457421527, 46.509306138691215 }, { 12.376485223040817, 46.76755910906985 }, { 12.153088006243054, 47.115393174826451 }, { 11.164827915093269, 46.941579494812729 }, { 11.048555942436536, 46.751358547546339 }, { 10.442701450246631, 46.893546250997431 }, { 9.932448357796659, 46.920728054382963 }, { 9.479969516649021, 47.102809963563374 }, { 9.632931756232978, 47.347601223329988 }, { 9.59422610844635, 47.52505809182027 }, { 9.89606814946319, 47.580196845075704 }, { 10.402083774465211, 47.302487697939164 }, { 10.544504021861599, 47.566399237653798 }, { 11.426414015354737, 47.523766181012974 }, { 12.141357456112788, 47.703083401065776 }, { 12.620759718484493, 47.672387600284409 }, { 12.932626987365948, 47.467645575543997 }, { 13.025851271220491, 47.637583523135831 }, { 12.884102817443875, 48.28914581968786 }, { 13.243357374737, 48.416114813829054 }, { 13.595945672264437, 48.877171942737149 }, { 14.338897739324722, 48.555305284207208 }, { 14.901447381254057, 48.964401760445824 }, { 15.253415561593982, 49.039074205107582 }, { 16.029647251050221, 48.73389903420793 }, { 16.499282667718774, 48.785808010445109 }, { 16.960288120194576, 48.5969823268506 }, { 16.879982944413001, 48.47001333270947 }, { 16.979666782304037, 48.123497015976305 } };
//        System.out.println("austria");
//        stats(austria);
//
//        double[][] croatia = { { 16.564808383864857, 46.50375092221983 }, { 16.882515089595302, 46.380631822284442 }, { 17.630066359129557, 45.951769110694187 }, { 18.456062452882861, 45.75948110613615 }, { 18.829824792873946, 45.908872358025285 }, { 19.072768995854176, 45.521511135432092 }, { 19.390475701584592, 45.236515611342384 }, { 19.005484597557594, 44.86023449354299 }, { 18.553214145591653, 45.081589667331457 }, { 17.861783481526402, 45.067740383477144 }, { 17.002146030351014, 45.233776760430942 }, { 16.534939406000206, 45.211607570977719 }, { 16.318156772535872, 45.004126695325908 }, { 15.959367303133376, 45.233776760430942 }, { 15.750026075918981, 44.818711656262565 }, { 16.239660271884532, 44.351143296885709 }, { 16.456442905348865, 44.041239732431279 }, { 16.916156447017329, 43.66772247982567 }, { 17.297373488034452, 43.446340643887368 }, { 17.674921502358984, 43.02856252702361 }, { 18.56, 42.65 }, { 18.450016883020862, 42.479992245312182 }, { 18.450016310304818, 42.479991360029317 }, { 17.509970330483327, 42.849994615239154 }, { 16.930005730871642, 43.20999848080038 }, { 16.015384555737683, 43.507215481127218 }, { 15.174453973052096, 44.243191229827914 }, { 15.376250441151797, 44.317915350922078 }, { 14.920309279040509, 44.738483995129457 }, { 14.901602410550879, 45.076060289076111 }, { 14.258747592839995, 45.233776760430942 }, { 13.952254672917036, 44.802123521496867 }, { 13.656975538801191, 45.136935126315961 }, { 13.679403110415819, 45.484149074885011 }, { 13.715059848697223, 45.500323798192376 }, { 14.411968214585414, 45.46616567644746 }, { 14.595109490627806, 45.634940904312714 }, { 14.935243767972935, 45.471695054702685 }, { 15.327674594797429, 45.452316392593332 }, { 15.323953891672405, 45.73178253842768 }, { 15.671529575267556, 45.834153550797879 }, { 15.768732944408553, 46.238108222023449 }, { 16.564808383864857, 46.50375092221983 } };
//        System.out.println("croatia");
//        stats(croatia);
//
//        double[][] germany = { { 14.119686313542559, 53.75702912049104 }, { 14.353315463934138, 53.248171291712971 }, { 14.074521111719434, 52.981262518925348 }, { 14.437599725002201, 52.62485016540839 }, { 14.685026482815687, 52.089947414755201 }, { 14.607098422919535, 51.745188096719971 }, { 15.016995883858669, 51.10667409932158 }, { 14.570718214586066, 51.002339382524276 }, { 14.307013380600637, 51.117267767941414 }, { 14.056227654688172, 50.9269176295943 }, { 13.338131951560285, 50.733234361364353 }, { 12.966836785543194, 50.484076443069085 }, { 12.240111118222558, 50.266337795607285 }, { 12.415190870827445, 49.969120795280567 }, { 12.521024204161193, 49.547415269562734 }, { 13.031328973043431, 49.307068182973239 }, { 13.595945672264437, 48.877171942737149 }, { 13.243357374737, 48.416114813829054 }, { 12.884102817443875, 48.28914581968786 }, { 13.025851271220491, 47.637583523135831 }, { 12.932626987365948, 47.467645575543997 }, { 12.620759718484493, 47.672387600284409 }, { 12.141357456112788, 47.703083401065776 }, { 11.426414015354737, 47.523766181012974 }, { 10.544504021861599, 47.566399237653798 }, { 10.402083774465211, 47.302487697939164 }, { 9.89606814946319, 47.580196845075704 }, { 9.59422610844635, 47.52505809182027 }, { 8.522611932009767, 47.830827541691292 }, { 8.317301466514095, 47.61357982033627 }, { 7.466759067422231, 47.620581976911808 }, { 7.593676385131062, 48.333019110703717 }, { 8.099278598674744, 49.01778351500333 }, { 6.658229607783568, 49.20195831969157 }, { 6.186320428094177, 49.463802802114515 }, { 6.242751092156993, 49.902225653678727 }, { 6.043073357781111, 50.128051662794235 }, { 6.15665815595878, 50.803721015010581 }, { 5.988658074577813, 51.851615709025054 }, { 6.589396599970826, 51.852029120483394 }, { 6.842869500362383, 52.228440253297549 }, { 7.092053256873896, 53.144043280644894 }, { 6.905139601274129, 53.482162177130647 }, { 7.100424838905269, 53.693932196662672 }, { 7.936239454793963, 53.748295803433791 }, { 8.121706170289485, 53.527792466844289 }, { 8.800734490604668, 54.020785630908904 }, { 8.572117954145369, 54.395646470754059 }, { 8.526229282270208, 54.962743638725158 }, { 9.282048780971138, 54.830865383516176 }, { 9.921906365609118, 54.983104153048032 }, { 9.9395797054529, 54.596641954153256 }, { 10.950112338920519, 54.363607082733154 }, { 10.93946699386845, 54.00869334575259 }, { 11.956252475643282, 54.196485500701158 }, { 12.518440382546714, 54.470370591847995 }, { 13.647467075259499, 54.075510972705899 }, { 14.119686313542559, 53.75702912049104 } };
//        System.out.println("germany");
//        stats(germany);
//
//        double[][] lux = { { 6.043073357781111, 50.128051662794235 }, { 6.242751092156993, 49.902225653678727 }, { 6.186320428094177, 49.463802802114515 }, { 5.897759230176348, 49.442667141307112 }, { 5.674051954784829, 49.529483547557504 }, { 5.782417433300907, 50.09032786722122 }, { 6.043073357781111, 50.128051662794235 } };
//        System.out.println("luxemburgo");
//        stats(lux);
//
//        double[][] bosnia = { { 18.56, 42.65 }, { 17.674921502358984, 43.02856252702361 }, { 17.297373488034452, 43.446340643887368 }, { 16.916156447017329, 43.66772247982567 }, { 16.456442905348865, 44.041239732431279 }, { 16.239660271884532, 44.351143296885709 }, { 15.750026075918981, 44.818711656262565 }, { 15.959367303133376, 45.233776760430942 }, { 16.318156772535872, 45.004126695325908 }, { 16.534939406000206, 45.211607570977719 }, { 17.002146030351014, 45.233776760430942 }, { 17.861783481526402, 45.067740383477144 }, { 18.553214145591653, 45.081589667331457 }, { 19.005484597557594, 44.86023449354299 }, { 19.00548, 44.86023 }, { 19.36803, 44.863 }, { 19.11761, 44.423070000000109 }, { 19.59976, 44.03847 }, { 19.454, 43.568100000000129 }, { 19.21852, 43.52384 }, { 19.03165, 43.43253 }, { 18.70648, 43.20011 }, { 18.56, 42.65 } };
//        System.out.println("bosnia");
//        stats(bosnia);
//
//        double[][] montenegro = { { 20.590246546680227, 41.855408919283626 }, { 20.52295, 42.21787 }, { 20.283754510181893, 42.320259507815081 }, { 20.0707, 42.58863 }, { 20.25758, 42.812750000000108 }, { 20.49679, 42.88469 }, { 20.63508, 43.21671 }, { 20.81448, 43.27205 }, { 20.95651, 43.13094 }, { 21.143395, 43.06868500000013 }, { 21.27421, 42.90959 }, { 21.43866, 42.86255 }, { 21.63302, 42.67717 }, { 21.77505, 42.6827 }, { 21.66292, 42.43922 }, { 21.54332, 42.320250000000101 }, { 21.576635989402121, 42.245224397061861 }, { 21.352700000000141, 42.2068 }, { 20.76216, 42.05186 }, { 20.717310000000111, 41.84711 }, { 20.590246546680227, 41.855408919283626 } };
//        System.out.println("montenegro");
//        stats(montenegro);
//
//        double[][] portugal = { { -9.034817674180246, 41.880570583659676 }, { -8.67194576662672, 42.134689439454959 }, { -8.263856980817792, 42.28046865495034 }, { -8.013174607769912, 41.790886135417125 }, { -7.422512986673795, 41.792074693359837 }, { -7.251308966490824, 41.918346055665047 }, { -6.668605515967656, 41.883386949219584 }, { -6.389087693700915, 41.381815497394655 }, { -6.851126674822552, 41.111082668617527 }, { -6.864019944679385, 40.330871893874829 }, { -7.026413133156595, 40.184524237624245 }, { -7.066591559263529, 39.711891587882775 }, { -7.498632371439726, 39.629571031241809 }, { -7.098036668313128, 39.030072740223787 }, { -7.374092169616318, 38.373058580064921 }, { -7.029281175148796, 38.075764065089771 }, { -7.166507941099865, 37.803894354802225 }, { -7.537105475281024, 37.428904323876239 }, { -7.453725551778092, 37.097787583966067 }, { -7.855613165711986, 36.838268540996268 }, { -8.382816127953689, 36.978880113262463 }, { -8.898856980820327, 36.868809312480778 }, { -8.746101446965554, 37.651345526676607 }, { -8.83999752443988, 38.266243394517616 }, { -9.287463751655224, 38.358485826158599 }, { -9.526570603869715, 38.737429104154913 }, { -9.446988898140233, 39.39206614842837 }, { -9.048305223008427, 39.755093085278773 }, { -8.977353481471681, 40.159306138665812 }, { -8.768684047877102, 40.760638943030187 }, { -8.79085323733031, 41.184334011391257 }, { -8.990789353867569, 41.543459377603639 }, { -9.034817674180246, 41.880570583659676 } };
//        System.out.println("portugal");
//        stats(portugal);
//
        double[][] usa = { { -122.84, 49.0000000000114 }, { -120.0, 49.000000000000114 }, { -117.03121, 49.0 }, { -116.04818, 49.0 }, { -113.0, 49.0 }, { -110.05, 49.0 }, { -107.05, 49.0 }, { -104.04826, 48.99986 }, { -100.65, 49.000000000000114 }, { -97.228720000004799, 49.0007 }, { -95.159069509172056, 49.0 }, { -95.15609, 49.38425 }, { -94.81758, 49.38905 }, { -94.64, 48.84 }, { -94.32914, 48.67074 }, { -93.63087, 48.60926 }, { -92.61, 48.45 }, { -91.64, 48.14 }, { -90.83, 48.27 }, { -89.6, 48.010000000000105 }, { -89.272917446636654, 48.019808254582813 }, { -88.378114183286712, 48.302917588893706 }, { -87.439792623300278, 47.94 }, { -86.461990831228263, 47.553338019392001 }, { -85.652363247403414, 47.220218817730512 }, { -84.876079881514897, 46.900083319682381 }, { -84.779238247399917, 46.637101955749017 }, { -84.543748745445839, 46.538684190449146 }, { -84.6049, 46.4396 }, { -84.3367, 46.40877 }, { -84.142119513673407, 46.512225857115709 }, { -84.091851264161505, 46.27541860613826 }, { -83.89076534700574, 46.116926988299014 }, { -83.616130947590591, 46.116926988299014 }, { -83.469550747394692, 45.994686387712534 }, { -83.592850714843109, 45.816893622412522 }, { -82.550924648758212, 45.347516587905432 }, { -82.337763125431138, 44.44 }, { -82.137642381503952, 43.571087551439973 }, { -82.43, 42.98 }, { -82.9, 42.43 }, { -83.12, 42.08 }, { -83.14199968131264, 41.975681057292874 }, { -83.029810146806994, 41.832795722005983 }, { -82.690089280920233, 41.675105088867326 }, { -82.439277716791594, 41.675105088867326 }, { -81.277746548167158, 42.209025987306816 }, { -80.247447679347943, 42.366199856122549 }, { -78.939362148743754, 42.863611355147981 }, { -78.92, 42.965 }, { -79.01, 43.27 }, { -79.171673550111862, 43.466339423184259 }, { -78.720279914042351, 43.625089423184932 }, { -77.737885097957701, 43.629055589363283 }, { -76.820034145805579, 43.628784288093755 }, { -76.5, 44.018458893758648 }, { -76.375, 44.09631 }, { -75.31821, 44.81645 }, { -74.867, 45.00048 }, { -73.34783, 45.00738 }, { -71.50506, 45.0082 }, { -71.405, 45.255 }, { -71.08482, 45.30524000000014 }, { -70.66, 45.46 }, { -70.305, 45.915 }, { -69.99997, 46.69307 }, { -69.237216, 47.447781 }, { -68.905, 47.185 }, { -68.23444, 47.35486 }, { -67.79046, 47.06636 }, { -67.79134, 45.70281 }, { -67.13741, 45.13753 }, { -66.96466, 44.809700000000134 }, { -68.03252, 44.3252 }, { -69.06, 43.98 }, { -70.11617, 43.684050000000127 }, { -70.645475633411024, 43.090238348964021 }, { -70.81489, 42.8653 }, { -70.825, 42.335 }, { -70.495, 41.805 }, { -70.08, 41.78 }, { -70.185, 42.145 }, { -69.88497, 41.92283 }, { -69.96503, 41.63717000000014 }, { -70.64, 41.475 }, { -71.12039, 41.494450000000143 }, { -71.86, 41.32 }, { -72.295, 41.27 }, { -72.87643, 41.22065 }, { -73.71, 40.931102351654488 }, { -72.24126, 41.119480000000124 }, { -71.944999999999879, 40.93 }, { -73.345, 40.63 }, { -73.982, 40.628 }, { -73.952325, 40.75075 }, { -74.25671, 40.47351 }, { -73.96244, 40.42763 }, { -74.17838, 39.70926 }, { -74.90604, 38.93954 }, { -74.98041, 39.1964 }, { -75.20002, 39.248450000000105 }, { -75.52805, 39.4985 }, { -75.32, 38.96 }, { -75.071834764789855, 38.782032230179254 }, { -75.05673, 38.40412 }, { -75.37747, 38.01551 }, { -75.94023, 37.21689 }, { -76.03127, 37.2566 }, { -75.722049999999854, 37.937050000000113 }, { -76.23287, 38.319215 }, { -76.35, 39.15 }, { -76.542725, 38.717615 }, { -76.32933, 38.08326 }, { -76.989997931613516, 38.239991766913363 }, { -76.30162, 37.917945 }, { -76.25874, 36.9664 }, { -75.9718, 36.89726 }, { -75.868039999999894, 36.55125 }, { -75.72749, 35.550740000000133 }, { -76.36318, 34.808540000000107 }, { -77.397635, 34.51201 }, { -78.05496, 33.92547 }, { -78.554349999999886, 33.861330000000123 }, { -79.06067, 33.49395 }, { -79.20357, 33.15839 }, { -80.301325, 32.509355 }, { -80.86498, 32.0333 }, { -81.33629, 31.44049 }, { -81.49042, 30.7299900000001 }, { -81.31371, 30.03552 }, { -80.98, 29.180000000000121 }, { -80.535585, 28.47213 }, { -80.529999999999859, 28.04 }, { -80.056539284977589, 26.880000000000109 }, { -80.088015, 26.205765 }, { -80.13156, 25.816775 }, { -80.38103, 25.20616 }, { -80.68, 25.08 }, { -81.17213, 25.201260000000104 }, { -81.33, 25.64 }, { -81.709999999999866, 25.87 }, { -82.24, 26.730000000000132 }, { -82.70515, 27.49504 }, { -82.85526, 27.88624 }, { -82.65, 28.550000000000125 }, { -82.93, 29.1 }, { -83.70959, 29.93656 }, { -84.1, 30.09 }, { -85.10882, 29.63615 }, { -85.28784, 29.68612000000013 }, { -85.7731, 30.15261 }, { -86.4, 30.4 }, { -87.53036, 30.27433 }, { -88.41782, 30.3849 }, { -89.18049, 30.31598 }, { -89.593831178419805, 30.159994004836847 }, { -89.413735, 29.89419 }, { -89.43, 29.48864 }, { -89.21767, 29.29108 }, { -89.40823, 29.15961 }, { -89.77928, 29.307140000000118 }, { -90.15463, 29.11743 }, { -90.880225, 29.148535 }, { -91.626785, 29.677000000000135 }, { -92.49906, 29.5523 }, { -93.22637, 29.78375 }, { -93.84842, 29.71363 }, { -94.69, 29.480000000000132 }, { -95.60026, 28.73863 }, { -96.59404, 28.30748 }, { -97.139999999999873, 27.83 }, { -97.37, 27.38 }, { -97.38, 26.69 }, { -97.33, 26.21 }, { -97.139999999999873, 25.87 }, { -97.53, 25.84 }, { -98.24, 26.06 }, { -99.02, 26.37 }, { -99.3, 26.84 }, { -99.52, 27.54 }, { -100.11, 28.110000000000127 }, { -100.45584, 28.696120000000121 }, { -100.9576, 29.380710000000136 }, { -101.6624, 29.7793 }, { -102.48, 29.76 }, { -103.11, 28.97 }, { -103.94, 29.27 }, { -104.456969999999899, 29.57196 }, { -104.70575, 30.12173 }, { -105.03737, 30.64402 }, { -105.63159, 31.08383 }, { -106.1429, 31.39995 }, { -106.50759, 31.75452 }, { -108.24, 31.754853718166373 }, { -108.24194, 31.34222 }, { -109.035, 31.341940000000136 }, { -111.02361, 31.33472 }, { -113.30498, 32.03914 }, { -114.815, 32.52528 }, { -114.72139, 32.72083 }, { -115.99135, 32.612390000000119 }, { -117.127759999999853, 32.53534 }, { -117.295937691273934, 33.046224615203869 }, { -117.944, 33.621236431201396 }, { -118.410602275897531, 33.740909223124447 }, { -118.519894822799756, 34.027781577575752 }, { -119.081, 34.078 }, { -119.438840642016714, 34.34847717828427 }, { -120.36778, 34.44711 }, { -120.62286, 34.60855 }, { -120.74433, 35.156860000000108 }, { -121.71457, 36.16153 }, { -122.54747, 37.551760000000115 }, { -122.51201, 37.783390000000111 }, { -122.95319, 38.11371 }, { -123.7272, 38.951660000000118 }, { -123.86517, 39.76699 }, { -124.39807, 40.3132 }, { -124.17886, 41.142020000000116 }, { -124.2137, 41.999640000000113 }, { -124.53284, 42.765990000000102 }, { -124.14214, 43.70838 }, { -124.020535, 44.615895 }, { -123.89893, 45.52341 }, { -124.079635, 46.86475 }, { -124.39567, 47.72017000000011 }, { -124.687210083007812, 48.184432983398551 }, { -124.56610107421875, 48.379714965820369 }, { -123.12, 48.04 }, { -122.58736, 47.096 }, { -122.34, 47.36 }, { -122.5, 48.18 }, { -122.84, 49.000000000000114 } } ;
        //System.out.println("USA");
        //stats(usa);

        System.out.println(GeoUtils.distance(new Point(-120, 27), new Point(-8, 42)));
    }


    public static void stats(double[][] coordinates) {
        long start = System.currentTimeMillis();

        Set<String> hashes = GeoUtils.geoHashesForPolygon(5, coordinates, true);
//        long middle = System.currentTimeMillis();
//        Set<String> enlarge = enlarge(hashes, 2);
//        long finish = System.currentTimeMillis();
//
//        System.out.println(hashes.size() + " - " + enlarge.size() + " - "+(enlarge.size()/Double.valueOf(hashes.size())));
//        System.out.println((middle-start)+ " - " + (finish-middle));
//        System.out.println();
        enlarge(hashes,2).stream().map(GeoUtils::toPolygon).map(Polygon::toString).forEach(p -> System.out.println(p+", "));
    }

    public static Set<String> enlarge(Set<String> hashes, int size) {
        return hashes.stream()
                     .flatMap(g -> GeoUtils.geoHashGrid(size, g).stream())
                     .collect(Collectors.toSet());
    }

}
